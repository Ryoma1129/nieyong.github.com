<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
	<title>2013-01-07</title>

  	<link rel="stylesheet" href="templates/SyntaxHighlighter.css"></link>
	<link rel="stylesheet" href="templates/style.css">
	
	<script	src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
	<script language="javascript" src="templates/shCore.js"></script>
	<script language="javascript" src="templates/shBrushCpp.js"></script>
	<script language="javascript" src="templates/shBrushJScript.js"></script>
	<script language="javascript" src="templates/shBrushPhp.js"></script>
	<script language="javascript" src="templates/shBrushJava.js"></script>
	<script language="javascript" src="templates/shBrushXml.js"></script>
	<script language="javascript" src="templates/shBrushCss.js"></script>
	<script language="javascript" src="templates/shBrushObjectiveC.js"></script>
	
	<script language="javascript" src="templates/vimwiki.js"></script>
</head>


<body>
    <div class="navbar">
      <div class="navbar-container">
	  <a class="brand" href="index.html">NieNet</a>
	  <div class="nav-collapse">
		<ul class="nav">
		  <li><a href="index.html">主页</a></li>
		  <li><a href="about.html">关于</a></li>
		</ul>
	  </div><!--/.nav-collapse -->
      </div>
    </div>

    <div class="container">
	<div id="content">
	
<p>
去年四月，可连接Android和iOS设备的智能手表Pebble Watch项目从孵化工厂Kickstarter的7万名支持者那里融资超过1000万美元。现在它的手表仍在接受预定，没有出货。最有可能出货的时间就在2013年。
</p>


<p>
Google 联合创始人谢尔盖·布林已经将他们近期发布的 Project Glass 产品原型 公开使用；
</p>


<h3 id="toc_0.0.1">部分iPhone 4S搜索不到蓝牙主控的问题</h3>
<p>
一共测试了6台iphone 4s机器，其中5台机器测试可以连接到ble，1台不行。
</p>

<h4 id="toc_0.0.1.1">测试根据：</h4>
<p>
通过通信库代码跟踪，发现扫描不到主控，是因为无法连接成功，可以扫描到。具体的表现为在连接回调成功之后，立刻出现了断开连接的回调，导致无法进一步的交互。
</p>

<p>
所以测试的时候，只要能够连接成功，并且读出ble的device信息，那么我们就算该机器能够连接上ble并且扫描到主控。
</p>

<h4 id="toc_0.0.1.2">测试过程：</h4>
<p>
测试的6台机器都安装软件lightblue（或者那个付费软件），然后看是否能够连接到我们的主控。其中，有5台能够连接，1台无法连接；
</p>

<p>
在上面6台设备中，有3台拥有开发这权限，其中1台无法连接，另外两台可以；这也说明上面的测试方法是ok的。
</p>

<p>
5台能够连接的iphone 4s系统为6.0.1；不能够连接的设备系统为6.0，升级到6.0.1仍然不能够连接；
</p>

<p>
有另外几台iphone 4s设备，由于版本为6.0以下，提示不能够安装lightblue软件；
</p>

<h4 id="toc_0.0.1.3">测试结果以及分析：</h4>
<ul>
<li>
软件版本6.0以上是能够使用ble的必要条件；

<li>
软件版本6.0以上也可能会无法连接到ble设备；

<li>
导致无法连接的原因可能和ios的库，iphone 4s使用的蓝牙方案有关（iphone 4s和iphone 5是使用的不同蓝牙方案）。有这样的猜测，主要参考了iphone的一些邮件，尤其是<a href="http://lists.apple.com/archives/bluetooth-dev/2012/Nov/msg00031.html">Bluetooth LE problems with new iOS devices</a>。这个邮件中出现的情况和我们的相近，只是他们的是iphone 4s能够连上，而iphone 5不能够。在邮件中谈到主要的问题出在蓝牙外设的参数配置。由于我们没有抓包工具等调试手段，所以无法深入跟踪。另外，我们的固件也尝试了几种参数配置，那台不能够连接的iphone 4s仍然无法连接。

</ul>

<p>
2013-01-07 14:42:18.395 AssistantForIphone[2284:907] _onSendCommand: Channel CMD
2013-01-07 14:42:18.540 AssistantForIphone[2284:907] Send Ping Command
2013-01-07 14:42:18.567 AssistantForIphone[2284:907] 通道监测
2013-01-07 14:42:18.745 AssistantForIphone[2284:907] _onSendCommand: Channel CMD
2013-01-07 14:42:18.924 AssistantForIphone[2284:907] 通道监测
2013-01-07 14:42:19.057 AssistantForIphone[2284:907] _onSendCommand: Channel CMD
2013-01-07 14:42:19.204 AssistantForIphone[2284:907] 通道监测
2013-01-07 14:42:19.382 AssistantForIphone[2284:907] _onSendCommand: Channel CMD
2013-01-07 14:42:19.540 AssistantForIphone[2284:907] Send Ping Command
2013-01-07 14:42:19.632 AssistantForIphone[2284:907] _onSendCommand: Channel CMD
2013-01-07 14:42:19.647 AssistantForIphone[2284:7d1b] CoreBluetooth[ERROR] XPC connection interrupted, resetting
2013-01-07 14:42:19.658 AssistantForIphone[2284:907] CoreBluetooth[WARNING] &lt;CBConcretePeripheral: 0x1e0eacf0 UUID = &lt;CFUUID 0x1e0e95a0&gt; 47363458-CF77-BE2A-0BE4-7F49E9A7A460, Name = "DJI Config", IsConnected = YES&gt; is not a valid peripheral
2013-01-07 14:42:19.659 AssistantForIphone[2284:907] CoreBluetooth[WARNING] &lt;CBConcretePeripheral: 0x1e0eacf0 UUID = &lt;CFUUID 0x1e0e95a0&gt; 47363458-CF77-BE2A-0BE4-7F49E9A7A460, Name = "DJI Config", IsConnected = YES&gt; is not a valid peripheral
2013-01-07 14:42:19.698 AssistantForIphone[2284:907] CoreBluetooth[WARNING] &lt;CBConcretePeripheral: 0x1e0eacf0 UUID = &lt;CFUUID 0x1e0e95a0&gt; 47363458-CF77-BE2A-0BE4-7F49E9A7A460, Name = "DJI Config", IsConnected = YES&gt; is not a valid peripheral
2013-01-07 14:42:19.700 AssistantForIphone[2284:907] CoreBluetooth[WARNING] &lt;CBConcretePeripheral: 0x1e0eacf0 UUID = &lt;CFUUID 0x1e0e95a0&gt; 47363458-CF77-BE2A-0BE4-7F49E9A7A460, Name = "DJI Config", IsConnected = YES&gt; is not a valid peripheral
2013-01-07 14:42:19.738 AssistantForIphone[2284:907] CoreBluetooth[WARNING] &lt;CBConcretePeripheral: 0x1e0eacf0 UUID = &lt;CFUUID 0x1e0e95a0&gt; 47363458-CF77-BE2A-0BE4-7F49E9A7A460, Name = "DJI Config", IsConnected = YES&gt; is not a valid peripheral
2013-01-07 14:42:19.882 AssistantForIphone[2284:907] _onSendCommand: Channel CMD
2013-01-07 14:42:19.898 AssistantForIphone[2284:907] CoreBluetooth[WARNING] &lt;CBConcretePeripheral: 0x1e0
</p>


<p>
BE2A-0BE4-7F49E9A7A460, Name = "DJI Config", IsConnected = YES&gt; is not a valid peripheral
2013-01-07 14:29:06.972 AssistantForIphone[2192:907] Send Ping Command
2013-01-07 14:29:06.975 AssistantForIphone[2192:907] CoreBluetooth[WARNING] &lt;CBConcretePeripheral: 0x1ea8c290 UUID = &lt;CFUUID 0x1ea94580&gt; 47363458-CF77-BE2A-0BE4-7F49E9A7A460, Name = "DJI Config", IsConnected = YES&gt; is not a valid peripheral
2013-01-07 14:29:06.977 AssistantForIphone[2192:907] CoreBluetooth[WARNING] &lt;CBConcretePeripheral: 0x1ea8c290 UUID = &lt;CFUUID 0x1ea94580&gt; 47363458-CF77-BE2A-0BE4-7F49E9A7A460, Name = "DJI Config", IsConnected = YES&gt; is not a valid peripheral
2013-01-07 14:29:07.374 AssistantForIphone[2192:907] CoreBluetooth[WARNING] &lt;CBConcretePeripheral: 0x1ea8c290 UUID = &lt;CFUUID 0x1ea94580&gt; 47363458-CF77-BE2A-0BE4-7F49E9A7A460, Name = "DJI Config", IsConnected = YES&gt; is not a valid peripheral
2013-01-07 14:29:07.684 AssistantForIphone[2192:907] CoreBluetooth[WARNING] &lt;CBConcretePeripheral: 0x1ea8c290 UUID = &lt;CFUUID 0x1ea94580&gt; 47363458-CF77-BE2A-0BE4-7F49E9A7A460, Name = "DJI Config", IsConnected = YES&gt; is not a valid peripheral
2013-01-07 14:29:07.686 AssistantForIphone[2192:907] [001]:didConnect
2013-01-07 14:29:07.687 AssistantForIphone[2192:907] finish connect: &lt;CBConcretePeripheral: 0x2471a7a0 UUID = &lt;CFUUID 0x1ea94580&gt; 47363458-CF77-BE2A-0BE4-7F49E9A7A460, Name = "DJI Config", IsConnected = YES&gt;
2013-01-07 14:29:07.692 AssistantForIphone[2192:7823] statistic threadForActiveMainCtrl
2013-01-07 14:29:07.973 AssistantForIphone[2192:907] Send Ping Command
2013-01-07 14:29:08.972 AssistantForIphone[2192:907] Send Ping Command
2013-01-07 14:29:09.973 AssistantForIphone[2192:907] Send Ping Command
</p>



<p>
2013-01-07 16:08:40.268 AssistantForIphone[2583:907] _onSendCommand: Channel CMD
2013-01-07 16:08:40.282 AssistantForIphone[2583:907] Send Ping Command
2013-01-07 16:08:40.431 AssistantForIphone[2583:907] 通道监测
2013-01-07 16:08:40.730 AssistantForIphone[2583:907] _onSendCommand: Channel CMD
2013-01-07 16:08:40.895 AssistantForIphone[2583:907] 通道监测
2013-01-07 16:08:41.282 AssistantForIphone[2583:907] Send Ping Command
2013-01-07 16:08:41.331 AssistantForIphone[2583:907] _onSendCommand: Channel CMD
2013-01-07 16:08:41.668 AssistantForIphone[2583:907] _onSendCommand: Channel CMD
2013-01-07 16:08:41.918 AssistantForIphone[2583:907] _onSendCommand: Channel CMD
2013-01-07 16:08:42.243 AssistantForIphone[2583:907] _onSendCommand: Channel CMD
2013-01-07 16:08:42.282 AssistantForIphone[2583:907] Send Ping Command
2013-01-07 16:08:42.410 AssistantForIphone[2583:907] 通道监测
</p>

	</div>
    </div>

    <footer>
	<p id="legal">Copyright &copy; 2012 NIE-YONG. All Rights Reserved.</p>
    </footer>

    <a class="go2top" style="display: none;"><span></span></a>

</body>


<script language="javascript">
dp.SyntaxHighlighter.HighlightAll('code');
</script>

</html>

